# 使用本地RTOS源代码与使用官方仓库中的RTOS源代码来构建.NET nanoFramework固件

在构建.NET nanoFramework固件时，开发者有两种选择：使用本地路径的RTOS源代码或从官方仓库下载源代码。
本文旨在简要介绍这两种选择之间的区别，以便您可以选择最适合您使用场景的选项。

## 从官方仓库获取源代码

当运行CMake时，如果未指定参数`-DRTOS_SOURCE_FOLDER`，CMake将连接到相应的官方仓库并从那里克隆源代码。此操作的完成时间主要取决于您的互联网连接速度。

RTOS将被缓存在构建目录中，因此除非清除构建目录，否则不会再次完全下载。每次运行构建时，都会检查上游仓库是否有任何更改。如果有更改，将下载并合并这些更改。

这个选项非常适合自动化构建或者当您没有（或不想）将仓库克隆到本地存储设备上时。

另一个优点是您不需要自己管理本地克隆的更新。

明显的缺点是，如果清除构建文件夹（在切换目标板时需要），'cached'仓库将消失，并且在下次构建项目时将进行完整下载。

## 使用本地克隆源代码

当运行CMake时，如果指定了参数`-DRTOS_SOURCE_FOLDER="....."`，则在构建时将使用位于指定路径的本地克隆。
唯一的时间开销是CMake将本地RTOS仓库的内容复制到构建缓存文件夹中所需的时间。这是一次性的操作，除非清除构建文件夹，否则不会再次发生。

当您有一个本地仓库的克隆，并且不希望通过检查仓库并下载它来增加构建时间，或者希望针对不同的分支进行构建时，此选项是首选。

缺点是您必须自己管理RTOS仓库的更新过程。

另一个重要的考虑因素是分支或标签，您必须**手动检出**。不这样做等同于使用包含开发文件的默认分支，这不是您想使用的稳定版本。因此，请确保检出与当前支持的稳定版本相匹配的分支或标签。如有疑问，请在Discord频道中提问。

同样，在清除构建文件夹后，'cached'仓库将消失。